# Телеграм-бот для распознавания эмоций по голосу

Бот принимает голосовые сообщения и возвращает эмоцию с уверенностью. Использует ту же модель, что и веб-приложение.

## Что нужно перед запуском
- Сохранённые файлы модели рядом с ботом: `emotion_model.h5`, `label_encoder.json`.
- Установленные зависимости:
```bash
pip install -r requirements.txt
```
- Токен бота Telegram.

## Настройка токена
Откройте `telegram_bot.py` и вставьте токен в переменную `token` в функции `main`, либо задайте его через окружение:
```bash
export TELEGRAM_BOT_TOKEN="123456:ABC..."
```

## Запуск
```bash
python telegram_bot.py
```
Бот поднимется в режиме polling и будет принимать голосовые сообщения.

## Как работает
1) Получает голосовое, скачивает его во временный файл.  
2) Прогоняет через ту же функцию извлечения признаков (нормализация длительности, MFCC, chroma_stft, mel, spectral contrast, tonnetz).  
3) Использует обученную модель для предсказания.  
4) Возвращает эмоцию на русском и вероятность.

## Поддерживаемые эмоции
- злость
- отвращение
- энтузиазм
- страх
- радость
- нейтрально
- грусть

## Советы
- Не храните рабочий токен в репозитории. При утечке перевыпустите токен через BotFather.
- Если бот запущен в окружении с уже активным event loop (например, в ноутбуке), используйте обычный запуск из терминала `python telegram_bot.py`.
